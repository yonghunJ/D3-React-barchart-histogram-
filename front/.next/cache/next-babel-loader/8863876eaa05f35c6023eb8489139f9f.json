{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport * as d3 from 'd3';\nimport * as dp from \"./dataProcesing\";\nconst MARGIN = {\n  TOP: 100,\n  BOTTOM: 100,\n  LEFT: 70,\n  RIGHT: 10\n};\nconst WIDTH = 1000 - MARGIN.LEFT - MARGIN.RIGHT;\nconst HEIGHT = 600 - MARGIN.BOTTOM - MARGIN.TOP;\nexport default class D3Chart {\n  constructor(element) {\n    _defineProperty(this, \"state\", {\n      y_axis: \"\"\n    });\n\n    const vis = this;\n    vis.svg = d3.select(element).append(\"svg\").attr(\"width\", WIDTH + MARGIN.LEFT + MARGIN.RIGHT).attr(\"height\", HEIGHT + MARGIN.BOTTOM + MARGIN.TOP).append(\"g\").attr(\"transform\", \"translate(\".concat(MARGIN.LEFT, \",\").concat(MARGIN.TOP, \")\"));\n    vis.xLabel = vis.svg.append('text').attr(\"x\", WIDTH / 2).attr(\"y\", HEIGHT + 50).attr(\"text-anchor\", \"middle\").text(\"\");\n    vis.yLabel = vis.svg.append('text').attr(\"x\", -(HEIGHT / 2)).attr(\"y\", -50).attr(\"text-anchor\", \"middle\").text(this.state.y_axis).attr(\"transform\", \"rotate(-90)\");\n    vis.tooltip = vis.svg.append('text');\n    vis.xAixsGroup = vis.svg.append('g').attr(\"transform\", \"translate(0,\".concat(HEIGHT, \")\"));\n    vis.yAxisGroup = vis.svg.append('g');\n    Promise.all([d3.csv(\"/Unemployment_mental_illness.csv\")]).then(dataset => {\n      // First Comparing\n      let [a, b] = dp.Unemployment_Education(dataset[0]);\n      vis.unemployment_Education = a;\n      vis.employment_Education = b; // Second Comparing\n\n      let [c, d] = dp.ResumeeGapAndSalary(dataset[0]);\n      vis.unemployment_ResumeGap = c;\n      vis.employment_ResumeGap = d;\n      let [e, f] = dp.AnnualSalarybyMentalIllness(dataset[0]);\n      vis.SelfIllness = e;\n      vis.NonSelfIllness = f;\n      let [g, h] = dp.ResumeGapbyMentalIllness(dataset[0]);\n      vis.SelfIllness_resumegap = g;\n      vis.NonSelfIllness_resumegap = h; // vis.update('Uneployment_Education')\n\n      vis.updateHistogram('SelfIllness_AnnualSalary', 2);\n      let [i, j] = dp.HaveAnxiety_HowManyDaysHospitalized(dataset[0]);\n      vis.anxiety_hospitalized = i;\n      vis.Donthave_anxiety_hospitalized = j;\n    });\n  }\n\n  updateHistogram(data, sliderValue) {\n    const vis = this;\n\n    if (data === \"SelfIllness_AnnualSalary\") {\n      vis.data = vis.SelfIllness;\n      vis.xLabel.text(\"Salary(THOUSANDS OF DOLLARS)\");\n      vis.yLabel.text(\"The Number of Self Illiness People\");\n    } else if (data === \"NonSelfIllness_AnnualSalary\") {\n      vis.data = vis.NonSelfIllness_resumegap;\n      vis.xLabel.text(\"Salary(THOUSANDS OF DOLLARS)\");\n      vis.yLabel.text(\"The Number of Non Self Illiness People\");\n    } else if (data === \"SelfIllness_TotalLengthOfGapsInResume\") {\n      vis.data = vis.SelfIllness_resumegap;\n      vis.xLabel.text(\"Resume Gap(Days)\");\n      vis.yLabel.text(\"The Number of Self Illines People\");\n    } else if (data === \"NonSelfIllness_TotalLengthOfGapsInResume\") {\n      vis.data = vis.NonSelfIllness;\n      vis.xLabel.text(\"Resume Gap(Days)\");\n      vis.yLabel.text(\"The Number of Non Self Illiness People\");\n    } else if (data === \"HaveAnxiety_HowManyDaysHospitalized\") {\n      vis.data = vis.anxiety_hospitalized;\n      vis.xLabel.text(\"How Many Days Hospitalized(Days)\");\n      vis.yLabel.text(\"The Number of People who have Anxiety\");\n    } else if (data === \"DontHaveAnxiety_HowManyDaysHospitalized\") {\n      vis.data = vis.Donthave_anxiety_hospitalized;\n      vis.xLabel.text(\"How Many Days Hospitalized(Days)\");\n      vis.yLabel.text(\"The Number of People who don't Have Anxiety\");\n    }\n\n    let x = d3.scaleLinear().domain([d3.min(vis.data, d => d.price) * 0.95, d3.max(vis.data, d => d.price * (sliderValue + 1) / sliderValue)]).range([0, WIDTH]);\n    const xAxisCall = d3.axisBottom(x);\n    vis.xAixsGroup.transition(500).call(xAxisCall);\n    let y = d3.scaleLinear().range([HEIGHT, 0]);\n    y.domain([0, d3.max(vis.data, d => d.price)]);\n    const yAxisCall = d3.axisLeft(y);\n    vis.yAxisGroup.transition().duration(500).call(yAxisCall);\n    var histogram = d3.histogram().value(function (d) {\n      return d.price;\n    }).domain(x.domain()).thresholds(x.ticks(sliderValue));\n    console.log(sliderValue, x.ticks(sliderValue));\n    var bins = histogram(vis.data); // Join\n\n    const rects = vis.svg.selectAll(\"rect\").data(bins); // EXIT\n\n    rects.exit().transition(500).attr('y', HEIGHT).attr('height', 0).remove(); // UPDATE\n\n    rects.transition(500).attr(\"height\", d => HEIGHT - y(d.length)).attr(\"x\", d => x(d.x0)).attr(\"y\", d => y(d.length)).attr(\"width\", x(x.ticks(sliderValue)[1] - x.ticks(sliderValue)[0])).style(\"fill\", \"#69b3a2\");\n    rects.on('mouseover', function (d, i) {\n      y.domain([0, d3.max(vis.data, d => d.price)]);\n      x.domain([d3.min(vis.data, d => d.price) * 0.95, d3.max(vis.data, d => d.price * (sliderValue + 1) / sliderValue)]).range([0, WIDTH]);\n      d3.select(this).transition(50).attr('opacity', '.85').attr(\"x\", x(d.x0) - 5).attr(\"y\", y(d.length) - 10).attr(\"height\", HEIGHT - y(d.length) + 10).attr(\"x\", d => x(d.x0)).attr(\"y\", d => y(d.length)).attr(\"width\", x(x.ticks(sliderValue)[1] - x.ticks(sliderValue)[0]) + 10);\n      console.log((x.ticks(sliderValue)[1] - x.ticks(sliderValue)[0]) / 2);\n      vis.tooltip.attr(\"x\", x(d.x0) + x(x.ticks(sliderValue)[1] - x.ticks(sliderValue)[0]) / 2).attr(\"y\", y(d.length) - 15).attr(\"text-anchor\", \"middle\").text(d.length);\n    });\n    rects.on('mouseout', function (d, i) {\n      d3.select(this).transition().duration('50').attr('opacity', '1').attr(\"x\", x(d.x0)).attr(\"y\", y(d.length)).attr(\"height\", HEIGHT - y(d.length)).attr(\"width\", x(x.ticks(sliderValue)[1] - x.ticks(sliderValue)[0]));\n      vis.tooltip.text(\"\");\n    });\n    rects.enter().append(\"rect\").attr(\"height\", d => HEIGHT - y(d.length)).attr(\"x\", d => x(d.x0)).attr(\"y\", d => y(d.length)).attr(\"width\", x(x.ticks(sliderValue)[1] - x.ticks(sliderValue)[0])).style(\"fill\", \"#69b3a2\").on('mouseover', function (d, i) {\n      y.domain([0, d3.max(vis.data, d => d.price)]);\n      x.domain([d3.min(vis.data, d => d.price) * 0.95, d3.max(vis.data, d => d.price * (sliderValue + 1) / sliderValue)]).range([0, WIDTH]);\n      d3.select(this).transition(50).attr('opacity', '.85').attr(\"x\", x(d.x0) - 5).attr(\"y\", y(d.length) - 10).attr(\"height\", HEIGHT - y(d.length) + 10).attr(\"x\", d => x(d.x0)).attr(\"y\", d => y(d.length)).attr(\"width\", x(x.ticks(sliderValue)[1] - x.ticks(sliderValue)[0]) + 10);\n      vis.tooltip.attr(\"x\", x(d.x0) + x(x.ticks(sliderValue)[1] - x.ticks(sliderValue)[0]) / 2).attr(\"y\", y(d.length) - 15).attr(\"text-anchor\", \"middle\").text(d.length);\n    }).on('mouseout', function (d, i) {\n      d3.select(this).transition().duration('50').attr('opacity', '1').attr(\"x\", x(d.x0)).attr(\"y\", y(d.length)).attr(\"height\", HEIGHT - y(d.length)).attr(\"width\", x(x.ticks(sliderValue)[1] - x.ticks(sliderValue)[0]));\n      vis.tooltip.text(\"\");\n    });\n  }\n\n}","map":{"version":3,"sources":["C:/Users/rrallvv/Documents/2020_spring/visualization/LAB1/HW1/front/src/D3Chart2.js"],"names":["d3","dp","MARGIN","TOP","BOTTOM","LEFT","RIGHT","WIDTH","HEIGHT","D3Chart","constructor","element","y_axis","vis","svg","select","append","attr","xLabel","text","yLabel","state","tooltip","xAixsGroup","yAxisGroup","Promise","all","csv","then","dataset","a","b","Unemployment_Education","unemployment_Education","employment_Education","c","d","ResumeeGapAndSalary","unemployment_ResumeGap","employment_ResumeGap","e","f","AnnualSalarybyMentalIllness","SelfIllness","NonSelfIllness","g","h","ResumeGapbyMentalIllness","SelfIllness_resumegap","NonSelfIllness_resumegap","updateHistogram","i","j","HaveAnxiety_HowManyDaysHospitalized","anxiety_hospitalized","Donthave_anxiety_hospitalized","data","sliderValue","x","scaleLinear","domain","min","price","max","range","xAxisCall","axisBottom","transition","call","y","yAxisCall","axisLeft","duration","histogram","value","thresholds","ticks","console","log","bins","rects","selectAll","exit","remove","length","x0","style","on","enter"],"mappings":"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","sourcesContent":["import * as d3 from 'd3';\r\nimport * as dp from \"./dataProcesing\";\r\nconst MARGIN = {TOP: 100, BOTTOM: 100, LEFT: 70, RIGHT: 10};\r\nconst WIDTH = 1000 - MARGIN.LEFT - MARGIN.RIGHT;\r\nconst HEIGHT = 600 - MARGIN.BOTTOM - MARGIN.TOP;\r\n\r\nexport default class D3Chart {\r\n\tstate = {\r\n\t\ty_axis: \"\"\r\n\t}\r\n    constructor(element){\r\n        const vis = this\r\n\r\n        vis.svg = d3.select(element)\r\n                      .append(\"svg\")\r\n                      .attr(\"width\",WIDTH +MARGIN.LEFT + MARGIN.RIGHT)\r\n                      .attr(\"height\",HEIGHT +MARGIN.BOTTOM + MARGIN.TOP)\r\n                      .append(\"g\")\r\n                      .attr(\"transform\",`translate(${MARGIN.LEFT},${MARGIN.TOP})`)\r\n        vis.xLabel = vis.svg.append('text')\r\n           .attr(\"x\",WIDTH/2)\r\n\t\t   .attr(\"y\",HEIGHT+50)\r\n\t\t   \r\n\t\t\r\n           .attr(\"text-anchor\",\"middle\")\r\n           .text(\"\")\r\n    \r\n\t\tvis.yLabel = vis.svg.append('text')\r\n           .attr(\"x\",-(HEIGHT/2))\r\n           .attr(\"y\",-50)\r\n           .attr(\"text-anchor\",\"middle\")\r\n           .text(this.state.y_axis)                \r\n           .attr(\"transform\",`rotate(-90)`)\r\n\r\n\t\tvis.tooltip = vis.svg.append('text')\r\n           \r\n\r\n\t\t\r\n\r\n\r\n        vis.xAixsGroup = vis.svg.append('g')\r\n                                .attr(\"transform\",`translate(0,${HEIGHT})`)\r\n        vis.yAxisGroup = vis.svg.append('g')\r\n\r\n\r\n\t\t\r\n        Promise.all([\r\n\t\t\td3.csv(\"/Unemployment_mental_illness.csv\")\r\n        ]).then( (dataset)=>{\r\n\t\t\t// First Comparing\r\n\t\t\tlet [a,b] = dp.Unemployment_Education(dataset[0])\r\n\t\t\tvis.unemployment_Education =a;vis.employment_Education = b\r\n\r\n\t\t\t// Second Comparing\r\n\t\t\tlet [c,d] = dp.ResumeeGapAndSalary(dataset[0])\r\n\t\t\tvis.unemployment_ResumeGap = c;vis.employment_ResumeGap = d\r\n\r\n\t\t\tlet [e,f] = dp.AnnualSalarybyMentalIllness(dataset[0])\r\n\t\t\tvis.SelfIllness = e; vis.NonSelfIllness = f\r\n\r\n\t\t\tlet [g,h] = dp.ResumeGapbyMentalIllness(dataset[0])\r\n\t\t\tvis.SelfIllness_resumegap = g; vis.NonSelfIllness_resumegap = h\r\n\t\t\t// vis.update('Uneployment_Education')\r\n\t\t\tvis.updateHistogram('SelfIllness_AnnualSalary',2)\r\n\t\t\tlet [i,j] = dp.HaveAnxiety_HowManyDaysHospitalized(dataset[0])\r\n\t\t\tvis.anxiety_hospitalized = i; vis.Donthave_anxiety_hospitalized = j\r\n        })\r\n\t}\r\n\r\n\tupdateHistogram(data,sliderValue){\r\n\t\t\r\n\t\t\r\n\t\tconst vis = this\r\n\t\t\r\n\t\tif(data === \"SelfIllness_AnnualSalary\"){\r\n\t\t\tvis.data = vis.SelfIllness\r\n\t\t\tvis.xLabel.text(\"Salary(THOUSANDS OF DOLLARS)\")\r\n\t\t\tvis.yLabel.text(\"The Number of Self Illiness People\")\r\n\r\n\t\t}else if(data === \"NonSelfIllness_AnnualSalary\"){\r\n\t\t\tvis.data = vis.NonSelfIllness_resumegap\r\n\t\t\tvis.xLabel.text(\"Salary(THOUSANDS OF DOLLARS)\")\r\n\t\t\tvis.yLabel.text(\"The Number of Non Self Illiness People\")\r\n\t\t}else if(data === \"SelfIllness_TotalLengthOfGapsInResume\"){\r\n\t\t\tvis.data = vis.SelfIllness_resumegap\r\n\t\t\tvis.xLabel.text(\"Resume Gap(Days)\")\r\n\t\t\tvis.yLabel.text(\"The Number of Self Illines People\")\r\n\t\t}else if(data === \"NonSelfIllness_TotalLengthOfGapsInResume\"){\r\n\t\t\tvis.data = vis.NonSelfIllness\r\n\t\t\tvis.xLabel.text(\"Resume Gap(Days)\")\r\n\t\t\tvis.yLabel.text(\"The Number of Non Self Illiness People\")\r\n\t\t}else if(data === \"HaveAnxiety_HowManyDaysHospitalized\"){\r\n\t\t\tvis.data = vis.anxiety_hospitalized\r\n\t\t\tvis.xLabel.text(\"How Many Days Hospitalized(Days)\")\r\n\t\t\tvis.yLabel.text(\"The Number of People who have Anxiety\")\r\n\t\t}else if(data === \"DontHaveAnxiety_HowManyDaysHospitalized\"){\r\n\t\t\tvis.data = vis.Donthave_anxiety_hospitalized\r\n\t\t\tvis.xLabel.text(\"How Many Days Hospitalized(Days)\")\r\n\t\t\tvis.yLabel.text(\"The Number of People who don't Have Anxiety\")\r\n\t\t}\r\n\t\t\r\n\t\tlet x = d3.scaleLinear()\r\n\t\t\t.domain([\r\n\t\t\t\td3.min(vis.data,d=>d.price) *0.95,\r\n\t\t\t\td3.max(vis.data, d=> d.price * (sliderValue +1) / sliderValue)])\r\n\t\t\t\t\t.range([0,WIDTH])\r\n\t\tconst xAxisCall = d3.axisBottom(x)\r\n\t\tvis.xAixsGroup.transition(500).call(xAxisCall)\r\n\r\n\t\tlet y = d3.scaleLinear()\r\n\t\t\t.range([HEIGHT, 0]);\r\n\t\t\ty.domain([0, d3.max(vis.data, d=> d.price)])\r\n\r\n\t\tconst yAxisCall = d3.axisLeft(y)\r\n\t\tvis.yAxisGroup.transition().duration(500).call(yAxisCall)\r\n\t\t\r\n\r\n\t\tvar histogram = d3.histogram()\r\n\t\t\t.value(function(d) { return d.price; })\r\n\t\t\t.domain(x.domain())\r\n\t\t\t.thresholds(x.ticks(sliderValue));\r\n\t\t\tconsole.log(sliderValue,x.ticks(sliderValue))\r\n\r\n\t\tvar bins = histogram(vis.data);\r\n\r\n\t\t// Join\r\n\t\tconst rects  = vis.svg.selectAll(\"rect\").data(bins)\r\n\t\t// EXIT\r\n\t\trects\r\n\t\t\t.exit().transition(500)\r\n\t\t\t.attr('y',HEIGHT)\r\n\t\t\t.attr('height',0)\r\n\t\t\t.remove()\r\n\t\t// UPDATE\r\n\t\t\r\n\t\trects.transition(500)\r\n\t\t\t.attr(\"height\",d => HEIGHT - y(d.length))\r\n\t\t\t.attr(\"x\",(d) => x(d.x0))\r\n\t\t\t.attr(\"y\",(d) => y(d.length))\r\n\t\t\t.attr(\"width\", x(x.ticks(sliderValue)[1] - x.ticks(sliderValue)[0]))\r\n\t\t\t.style(\"fill\", \"#69b3a2\")\t\r\n\t\t\r\n\t\trects.on('mouseover', function (d, i) {\r\n\t\t\ty.domain([0, d3.max(vis.data, d=> d.price)])\r\n\t\t\tx.domain([\r\n\t\t\t\td3.min(vis.data,d=>d.price) *0.95,\r\n\t\t\t\td3.max(vis.data, d=> d.price * (sliderValue +1) / sliderValue)])\r\n\t\t\t\t\t.range([0,WIDTH])\r\n\t\t\t\r\n\t\t\td3.select(this).transition(50)\r\n\t\t\t\t.attr('opacity', '.85')\r\n\t\t\t\t.attr(\"x\", x(d.x0) - 5)\r\n\t\t\t\t.attr(\"y\", y(d.length) - 10)\r\n\t\t\t\t.attr(\"height\", HEIGHT - y(d.length) + 10)\r\n\t\t\t\t\r\n\r\n\t\t\t\t.attr(\"x\",(d) => x(d.x0))\r\n\t\t\t\t.attr(\"y\",(d) => y(d.length))\r\n\t\t\t\t.attr(\"width\", x(x.ticks(sliderValue)[1] - x.ticks(sliderValue)[0]) + 10)\r\n\t\t\tconsole.log((x.ticks(sliderValue)[1] - x.ticks(sliderValue)[0]) /2)\r\n\t\t\tvis.tooltip\r\n\t\t\t\t.attr(\"x\",x(d.x0) + x((x.ticks(sliderValue)[1] - x.ticks(sliderValue)[0])) /2 )\r\n\t\t\t\t.attr(\"y\",y(d.length) - 15)\r\n\t\t\t\t.attr(\"text-anchor\",\"middle\")\r\n\t\t\t\t.text(d.length)\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\t\t\r\n\t   rects.on('mouseout', function (d, i) {\r\n\t\t\td3.select(this).transition()\r\n\t\t\t\t.duration('50')\r\n\t\t\t\t.attr('opacity', '1')\r\n\t\t\t\t.attr(\"x\", x(d.x0))\r\n\t\t\t\t.attr(\"y\", y(d.length))\r\n\t\t\t\t.attr(\"height\", HEIGHT - y(d.length))\r\n\t\t\t\t.attr(\"width\", x(x.ticks(sliderValue)[1] - x.ticks(sliderValue)[0]))\r\n\t\t\tvis.tooltip\r\n\t\t\t\t.text(\"\")\r\n\t   })\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\trects\r\n\t\t\t.enter()\r\n\t\t\t.append(\"rect\")\r\n\t\t\t\t.attr(\"height\",d => HEIGHT - y(d.length))\r\n\t\t\t\t.attr(\"x\",(d) => x(d.x0))\r\n\t\t\t\t.attr(\"y\",(d) => y(d.length))\r\n\t\t\t\t.attr(\"width\",x(x.ticks(sliderValue)[1] - x.ticks(sliderValue)[0]))\r\n\t\t\t\t.style(\"fill\", \"#69b3a2\")\t\r\n\t\t\r\n\t\t\t\t\r\n\t\t\t\t.on('mouseover', function (d, i) {\r\n\t\t\t\t\ty.domain([0, d3.max(vis.data, d=> d.price)])\r\n\t\t\t\t\tx.domain([\r\n\t\t\t\t\t\td3.min(vis.data,d=>d.price) *0.95,\r\n\t\t\t\t\t\td3.max(vis.data, d=> d.price * (sliderValue +1) / sliderValue)])\r\n\t\t\t\t\t\t\t.range([0,WIDTH])\r\n\t\t\t\t\t\r\n\t\t\t\t\td3.select(this).transition(50)\r\n\t\t\t\t\t\t.attr('opacity', '.85')\r\n\t\t\t\t\t\t.attr(\"x\", x(d.x0) - 5)\r\n\t\t\t\t\t\t.attr(\"y\", y(d.length) - 10)\r\n\t\t\t\t\t\t.attr(\"height\", HEIGHT - y(d.length) + 10)\r\n\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t.attr(\"x\",(d) => x(d.x0))\r\n\t\t\t\t\t\t.attr(\"y\",(d) => y(d.length))\r\n\t\t\t\t\t\t.attr(\"width\", x(x.ticks(sliderValue)[1] - x.ticks(sliderValue)[0]) + 10)\r\n\t\t\t\t\tvis.tooltip\r\n\t\t\t\t\t\t.attr(\"x\",x(d.x0) + x((x.ticks(sliderValue)[1] - x.ticks(sliderValue)[0])) /2 )\r\n\t\t\t\t\t\t.attr(\"y\",y(d.length) - 15)\r\n\t\t\t\t\t\t.attr(\"text-anchor\",\"middle\")\r\n\t\t\t\t\t\t.text(d.length)\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t   .on('mouseout', function (d, i) {\r\n\t\t\t\t\td3.select(this).transition()\r\n\t\t\t\t\t\t.duration('50')\r\n\t\t\t\t\t\t.attr('opacity', '1')\r\n\t\t\t\t\t\t.attr(\"x\", x(d.x0))\r\n\t\t\t\t\t\t.attr(\"y\", y(d.length))\r\n\t\t\t\t\t\t.attr(\"height\", HEIGHT - y(d.length))\r\n\t\t\t\t\t\t.attr(\"width\", x(x.ticks(sliderValue)[1] - x.ticks(sliderValue)[0]))\r\n\t\t\t\t\tvis.tooltip\r\n\t\t\t\t\t\t.text(\"\")\r\n\t\t\t   })\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t}\r\n\t\r\n}"]},"metadata":{},"sourceType":"module"}